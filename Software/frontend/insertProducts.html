<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Customer Accounting Dashboard</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      margin: 20px;
      background: #eef2f7;
      color: #2c3e50;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    .form-container {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      max-width: 700px;
      margin: auto;
    }
    .row {
      display: flex;
      gap: 15px;
      margin-bottom: 10px;
    }
    .row > div {
      flex: 1;
    }
    label {
      font-weight: bold;
      font-size: 0.9em;
    }
    input {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      padding: 10px 15px;
      background: #3498db;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
    }
    button:hover {
      background: #2980b9;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 25px;
      background: #fff;
      border-radius: 8px;
      overflow: hidden;
    }
    th, td {
      padding: 12px;
      text-align: center;
      border-bottom: 1px solid #ddd;
    }
    th {
      background: #3498db;
      color: white;
    }
    tr:nth-child(even) {
      background: #f9f9f9;
    }
    tr:hover {
      background: #f1f7ff;
    }
    #grandTotal {
      margin-top: 15px;
      font-weight: bold;
      text-align: right;
      font-size: 1.1em;
    }
    #searchBox {
      margin: 20px auto;
      display: block;
      padding: 8px;
      width: 300px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
  </style>
</head>
<body>

  <h2>Customer Accounting Dashboard</h2>

  <div class="form-container">
    <form id="customerForm">
      <div class="row">
        <div>
          <label>Serial No.</label>
          <input type="text" id="serial" required>
        </div>
        <div>
          <label>Name</label>
          <input type="text" id="name" required>
        </div>
      </div>
      <div class="row">
        <div>
          <label>Address</label>
          <input type="text" id="address" required>
        </div>
        <div>
          <label>Contact</label>
          <input type="text" id="contact" required>
        </div>
      </div>
      <div class="row">
        <div>
          <label>Product</label>
          <input type="text" id="product" required>
        </div>
        <div>
          <label>Price</label>
          <input type="number" id="price" required>
        </div>
        <div>
          <label>Quantity</label>
          <input type="number" id="quantity" required>
        </div>
        <div>
          <label>Total</label>
          <input type="number" id="total" readonly>
        </div>
      </div>
      <button type="submit">Insert Customer</button>
    </form>
  </div>

  <input type="text" id="searchBox" placeholder="Search by name, product, or serial...">

  <table id="customerTable">
    <thead>
      <tr>
        <th>Serial</th>
        <th>Name</th>
        <th>Address</th>
        <th>Contact</th>
        <th>Product</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Total</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div id="grandTotal">Grand Total: 0</div>

  <script>
    const form = document.getElementById('customerForm');
    const tableBody = document.querySelector('#customerTable tbody');
    const grandTotalEl = document.getElementById('grandTotal');
    const searchBox = document.getElementById('searchBox');

    let grandTotal = 0;

    form.price.addEventListener('input', calcTotal);
    form.quantity.addEventListener('input', calcTotal);

    function calcTotal() {
      const price = parseFloat(form.price.value) || 0;
      const qty = parseFloat(form.quantity.value) || 0;
      form.total.value = price * qty;
    }

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      const customer = {
        serial: form.serial.value,
        name: form.name.value,
        address: form.address.value,
        contact: form.contact.value,
        product: form.product.value,
        price: form.price.value,
        quantity: form.quantity.value,
        total: form.total.value
      };

      const row = document.createElement('tr');
      Object.values(customer).forEach(val => {
        const cell = document.createElement('td');
        cell.textContent = val;
        row.appendChild(cell);
      });

      // Actions cell
      const actions = document.createElement('td');
      actions.innerHTML = `
        <button onclick="editRow(this)">Edit</button>
        <button onclick="deleteRow(this)">Delete</button>
      `;
      row.appendChild(actions);

      tableBody.appendChild(row);

      grandTotal += parseFloat(customer.total);
      grandTotalEl.textContent = "Grand Total: " + grandTotal;

      form.reset();
      form.total.value = '';
    });

    function editRow(btn) {
      const row = btn.parentElement.parentElement;
      const cells = row.querySelectorAll('td');
      form.serial.value = cells[0].textContent;
      form.name.value = cells[1].textContent;
      form.address.value = cells[2].textContent;
      form.contact.value = cells[3].textContent;
      form.product.value = cells[4].textContent;
      form.price.value = cells[5].textContent;
      form.quantity.value = cells[6].textContent;
      form.total.value = cells[7].textContent;

      grandTotal -= parseFloat(cells[7].textContent);
      grandTotalEl.textContent = "Grand Total: " + grandTotal;

      row.remove();
    }

    function deleteRow(btn) {
      const row = btn.parentElement.parentElement;
      const total = parseFloat(row.cells[7].textContent);
      grandTotal -= total;
      grandTotalEl.textContent = "Grand Total: " + grandTotal;
      row.remove();
    }

    searchBox.addEventListener('input', function() {
      const term = this.value.toLowerCase();
      Array.from(tableBody.rows).forEach(row => {
        const text = row.textContent.toLowerCase();
        row.style.display = text.includes(term) ? '' : 'none';
      });
    });
  </script>

</body>
</html>
